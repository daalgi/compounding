(this.webpackJsonpcompounding=this.webpackJsonpcompounding||[]).push([[0],{249:function(t,e,a){},250:function(t,e,a){},338:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(54),s=a.n(i),o=(a(249),a(22)),c=(a(250),a(27)),l=a(44),u=a(355),m=a(6),d=function(t){var e=t.label,a=t.name,n=t.value,r=t.defaultValue,i=void 0===r?0:r,s=t.min,o=void 0===s?0:s,c=t.max,l=void 0===c?100:c,d=t.step,p=void 0===d?1:d,y=t.marks,h=void 0===y?null:y,b=t.factor,v=void 0===b?1:b,f=t.suffix,j=void 0===f?"":f,x=t.onChange,O=void 0===x?null:x;return Object(m.jsxs)("div",{className:"input-item",children:[Object(m.jsx)("p",{className:"input-label",children:e(n)}),Object(m.jsx)(u.a,{id:a,min:o,max:l,step:p,defaultValue:i,onChangeCommitted:function(t,e){return O(t.target.parentNode.id,e)},marks:null===h||void 0===h?void 0:h.map((function(t){return{label:"".concat(t*v).concat(j),value:t}})),valueLabelDisplay:"auto",color:"primary","aria-labelledby":"discrete-slider-restrict"})]})},p=function(t){var e=t.children;t.bold;return Object(m.jsx)("p",{className:"subtitle",children:e})},y=a(46),h=1e3,b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=parseFloat(b(t,e));if(0===e)return parseInt(a).toString();var n=a%1===0?0:a.toString().split(".")[1].length;return 0===n?a.toString()+"."+Array(e-n).fill("0").join(""):n<e?a.toString()+Array(e-n).fill("0").join(""):a.toString()},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t<1e3?v(t,e):t<1e6?v(t/1e3,e)+"k":v(t/1e6,e)+"M"},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v(100*t,e)+"%"},x=function(t){var e=t.length;if(e>0){var a=t.reduce((function(t,e){return t+e}))/e;return{mean:a,standardDeviation:Math.sqrt(t.map((function(t){return Math.pow(t-a,2)})).reduce((function(t,e){return t+e}))/e)}}return{}},O=function(t){var e=t.accumInvested,a=t.monthlyInvestment,n=t.roiMean,r=t.roiStsdv,i=0===r?n:function(t,e){var a,n,r;do{r=(a=2*Math.random()-1)*a+(n=2*Math.random()-1)*n}while(r>=1||0===r);return t+e*a*Math.sqrt(-2*Math.log(r)/r)}(n,r),s=(e+=a)*i;return{roi:i,interest:s,accumInvested:e+s}},S=function(t){var e=t.year,a=t.yearsToRetire,n=t.initialInvestment,r=t.strategy,i=r.monthlyDeposits,s=r.monthlyWithdrawals,o=r.roiMean,c=r.roiStsdv;if(n<=0)return{year:e,accumInvested:0};var l=n,u=[],m=e<a?i:-s;o/=12,c/=Math.sqrt(12);for(var d=0;d<12;d++){var p=O({accumInvested:l,monthlyInvestment:m,roiMean:o,roiStsdv:c});l=p.accumInvested,u.push(p)}var y={year:e,capitalContributions:12*m,accumInvested:l<0?0:l};return y.interest=l-n-y.capitalContributions,y.roi=(l-12*m)/n-1,y},g=function(t){for(var e=t.yearsToRetire,a=t.initialInvestment,n=t.monthlyDeposits,r=t.monthlyWithdrawals,i=t.roiMean,s=t.roiStsdv,o=t.lastYear,c=1,l=[],u=a,m=null;c<=o;){var d=S({year:c,yearsToRetire:e,initialInvestment:u,strategy:{monthlyDeposits:n,monthlyWithdrawals:r,roiMean:i,roiStsdv:s}});m||0!=u||(m=c),l.push(d),u=d.accumInvested,c++}return{retirementStart:{year:(new Date).getFullYear()+e,accumInvested:l[Math.max(e-1,0)].accumInvested},yearBankrupcy:m,annualRes:l,capital:{deposited:a+12*n*e,withdrawn:12*r*(o-e),lastYear:l[l.length-1].accumInvested},roi:{mean:l.reduce((function(t,e){return t+e.roi}),0)/l.length,minimum:Math.min.apply(Math,Object(y.a)(l.map((function(t){return t.roi})))),maximum:Math.max.apply(Math,Object(y.a)(l.map((function(t){return t.roi}))))}}},k=[{label:function(t){return"Years to retire: ".concat(t)},name:"yearsToRetire",min:0,max:50,step:1,marks:[0,10,20,30,40,50]},{label:function(t){return"Initial investment: ".concat(t/1e3,"k")},name:"initialInvestment",min:0,max:5e5,step:1e3,marks:[0,1e5,2e5,3e5,4e5,5e5],factor:.001,suffix:"k"},{label:function(t){return"Monthly deposit: ".concat(t)},name:"monthlyDeposits",min:0,max:3e3,step:100,marks:[0,500,1e3,2e3,3e3]},{label:function(t){return"Monthly withdrawal: ".concat(t)},name:"monthlyWithdrawals",min:0,max:3e3,step:100,marks:[0,500,1e3,2e3,3e3]},{label:function(t){return"Years in retirement: ".concat(t)},name:"yearsInRetirement",min:20,max:60,step:5,marks:[20,30,40,50,60]}],w=[{label:function(t){return"Mean: ".concat(t,"%")},name:"roiMean",min:0,max:50,step:1,marks:[0,10,20,30,40,50]},Object(l.a)({label:function(t){return"Standard deviation: ".concat(t,"%")},name:"roiStsdv",min:0,max:50,step:1,marks:[0,1e5,2e5,3e5,4e5,5e5]},"marks",[0,10,20,30,40,50])],Y={initialInvestment:2e5,monthlyDeposits:1500,yearsToRetire:20,monthlyWithdrawals:1700,yearsInRetirement:60,roiMean:7,roiStsdv:19},I=function(t){var e=t.setState,a=Object(n.useState)(Y),r=Object(o.a)(a,2),i=r[0],s=r[1];Object(n.useEffect)((function(){y()}),[]);var u=function(t,e){s(Object(c.a)(Object(c.a)({},i),{},Object(l.a)({},t,e)))},y=function(){var t=Object(c.a)(Object(c.a)({},i),{},{roiMean:i.roiMean/100,roiStsdv:i.roiStsdv/100}),a=function(t,e){var a=t.yearsToRetire+t.yearsInRetirement;t.lastYear=a;var n=g(Object(c.a)({},t));e.lastYear=a;for(var r=g(Object(c.a)({},e)),i=[],s=0;s<h;s++)i.push(g(Object(c.a)({},e)).capital.lastYear);var o=(new Date).getFullYear(),l=n.annualRes.map((function(t,e){return{year:t.year+o,constant:t.accumInvested/h,random:r.annualRes[e].accumInvested/h}}));return{scenario:{initialInvestment:t.initialInvestment,monthlyDeposits:t.monthlyDeposits,monthlyWithdrawals:t.monthlyWithdrawals,yearlyWithdrawals:12*t.monthlyWithdrawals},retirementStart:{year:n.retirementStart.year,constant:n.retirementStart.accumInvested,random:r.retirementStart.accumInvested,firstYearGains:l[t.yearsToRetire].constant-l[t.yearsToRetire-1].constant},lastYear:{year:o+t.lastYear,deposited:n.capital.deposited,withdrawn:n.capital.withdrawn,constant:n.capital.lastYear,random:r.capital.lastYear,normalDistribution:x(i)},yearBankrupcy:{constant:n.yearBankrupcy&&o+n.yearBankrupcy,random:r.yearBankrupcy&&o+r.yearBankrupcy},probabilities:{noBankrupcy:i.reduce((function(t,e){return e>0?t+1:t}),0)/i.length,lastYearGEdeposited:i.reduce((function(t,e){return e>=n.capital.deposited?t+1:t}),0)/i.length},plotData:l}}(Object(c.a)(Object(c.a)({},t),{},{roiStsdv:0}),t);console.log(a),e(a)};return console.log("render FORM"),Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),y()},className:"input-form",children:[Object(m.jsx)(p,{children:"Scenario parameters"}),k.map((function(t,e){var a=t.label,n=t.name,r=t.min,s=t.max,o=t.step,c=t.marks,l=t.factor,p=t.suffix;return Object(m.jsx)(d,{label:a,name:n,value:i[n],defaultValue:Y[n],onChange:u,min:r,max:s,step:o,marks:c,factor:l,suffix:p},e)})),Object(m.jsx)(p,{children:"Expected annual returns (normal distribution)"}),w.map((function(t,e){var a=t.label,n=t.name,r=t.min,s=t.max,o=t.step,c=t.marks,l=t.factor,p=t.suffix;return Object(m.jsx)(d,{label:a,name:n,value:i[n],defaultValue:Y[n],onChange:u,min:r,max:s,step:o,marks:c,factor:l,suffix:p},e)})),Object(m.jsx)("br",{}),Object(m.jsx)("button",{type:"submit",name:"btn",className:"btn",children:"Run simulation"})]})},M=function(t){var e=t.title,a=t.info,r=void 0===a?[]:a;return Object(m.jsxs)("div",{className:"results-card",children:[Object(m.jsx)(p,{children:e}),r.map((function(t,e){return"string"===typeof t?Object(m.jsx)("p",{children:t},e):Object(n.createElement)("p",Object(c.a)(Object(c.a)({},t),{},{key:e}),t.text)}))]})},D=function(t){var e=t.state;return Object(m.jsxs)("div",{className:"cards-container",children:[Object(m.jsx)(M,{title:"1000 random simulations",info:[{variant:"subtitle1",text:"Your investment in ".concat(e.lastYear.year,":")},"- Mean: ".concat(f(e.lastYear.normalDistribution.mean)),"- Standard deviation: ".concat(f(e.lastYear.normalDistribution.standardDeviation)),"- ".concat(j(e.probabilities.noBankrupcy)," probability of still having money"),"- ".concat(j(e.probabilities.lastYearGEdeposited)," probability of having at least ").concat(f(e.lastYear.deposited)," (your deposits)")]}),Object(m.jsx)(M,{title:"Scenario Analysis",info:["Total deposits: ".concat(f(e.lastYear.deposited)),"Total withdrawals: ".concat(f(e.lastYear.withdrawn)),"Withdrawals in the first year of retirement (".concat(e.retirementStart.year,"): ").concat(f(e.scenario.yearlyWithdrawals)),{variant:"subtitle1",text:"Constant returns hypothesis:"},"- Retirement (".concat(e.retirementStart.year,"): \n                    ").concat(f(e.retirementStart.constant)),"- Gains during the first year in retirement: \n                    ".concat(f(1e3*e.retirementStart.firstYearGains)),"- Last year (".concat(e.lastYear.year,"): \n                    ").concat(f(e.lastYear.constant)),e.yearBankrupcy.constant?"- No money left in ".concat(e.yearBankrupcy.constant):"",{variant:"subtitle1",text:"One random simulation:"},"- Retirement (".concat(e.retirementStart.year,"): \n                    ").concat(f(e.retirementStart.random)),"- Last year (".concat(e.lastYear.year,"): \n                    ").concat(f(e.lastYear.random)),e.yearBankrupcy.random?"- No money left in ".concat(e.yearBankrupcy.random):""]})]})},R=a(356),T=a(359),A=a(360),B=a(358),C=a(361),N=a(357),W={xAccessor:function(t){return t.year},yConstantAccessor:function(t){return t.constant},yRandomAccessor:function(t){return t.random}},G=function(t){var e=t.data;return Object(m.jsxs)(R.a,{height:300,xScale:{type:"band"},yScale:{type:"linear"},children:[Object(m.jsx)(T.a,{orientation:"left",numTicks:4}),Object(m.jsx)(T.a,{orientation:"bottom",numTicks:4}),Object(m.jsx)(A.a,{columns:!0,numTicks:4}),Object(m.jsx)(B.a,{dataKey:"Constant returns",data:e,xAccessor:W.xAccessor,yAccessor:W.yConstantAccessor,fillOpacity:.1}),Object(m.jsx)(C.a,{dataKey:"Random returns",data:e,xAccessor:W.xAccessor,yAccessor:W.yRandomAccessor}),Object(m.jsx)(N.a,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showVerticalCrosshair:!0,showSeriesGlyphs:!0,renderTooltip:function(t){var e=t.tooltipData;t.colorScale;return Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:W.xAccessor(e.nearestDatum.datum)}),Object(m.jsxs)("p",{children:["Constant returns: ",f(1e3*W.yConstantAccessor(e.nearestDatum.datum))]}),Object(m.jsxs)("p",{children:["Random returns: ",f(1e3*W.yRandomAccessor(e.nearestDatum.datum))]})]})}})]})},E={scenario:{initialInvestment:0,monthlyDeposits:0,monthlyWithdrawals:0,yearlyWithdrawals:0},retirementStart:{year:0,constant:0,random:0,firstYearGains:0},lastYear:{year:0,deposited:0,withdrawn:0,constant:0,random:0,normalDistribution:{mean:0,standardDeviation:0}},yearBankrupcy:{},probabilities:{noBankrupcy:0,lastYearGEdeposited:0},plotData:[{year:1,constant:0,random:0}]};var V=function(){var t=Object(n.useState)(E),e=Object(o.a)(t,2),a=e[0],r=e[1];return Object(m.jsxs)("div",{className:"",children:[Object(m.jsx)("h1",{className:"title",children:"Investment compounding"}),Object(m.jsxs)("div",{className:"page",children:[Object(m.jsx)(I,{setState:r}),Object(m.jsx)(D,{state:a}),Object(m.jsx)(G,{data:a.plotData})]})]})};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(V,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.2a09a8b6.chunk.js.map